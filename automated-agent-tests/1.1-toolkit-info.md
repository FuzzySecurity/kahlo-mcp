# Phase 1.1 - Toolkit Information

**Executed**: 2026-01-21
**Worker ID**: a488f00
**Status**: COMPLETE

## Tools Called
1. `kahlo_mcp_about()` - Retrieve complete toolkit contract

## Raw Output (Key Fields)

### Toolkit Metadata
```json
{
  "schema_version": 1,
  "toolkit": {
    "name": "kahlo",
    "version": "0.1.0",
    "transport": "stdio",
    "log_level": "info",
    "data_dir": "C:\\Users\\b33f\\tools\\Droid\\k4hlo\\kahlo-mcp\\data"
  }
}
```

### Storage Layout
```json
{
  "runs": "C:\\Users\\b33f\\tools\\Droid\\k4hlo\\kahlo-mcp\\data\\runs",
  "modules": "C:\\Users\\b33f\\tools\\Droid\\k4hlo\\kahlo-mcp\\data\\modules",
  "drafts": "C:\\Users\\b33f\\tools\\Droid\\k4hlo\\kahlo-mcp\\data\\drafts",
  "snapshots": "C:\\Users\\b33f\\tools\\Droid\\k4hlo\\kahlo-mcp\\data\\snapshots"
}
```

### Concepts Documented
| Concept | Identity | Summary |
|---------|----------|---------|
| target | target_id | Instrumented Android app process on device |
| job | job_id | Unit of work in isolated Frida script instance |
| module | module_id@version | Versioned reusable instrumentation bundle |
| draft | draft_id | Mutable temporary module for iteration |
| event | event_id | Small structured telemetry, cursor-polled |
| artifact | artifact_id | Large payloads stored on disk, max 10MB |

### Stdlib Namespaces (9 total, 64 functions)
| Namespace | Functions | Purpose |
|-----------|-----------|---------|
| stack | 6 | Stack trace capture and formatting |
| inspect | 9 | Object introspection and type discovery |
| classes | 6 | Java class enumeration and loading |
| bytes | 9 | Binary data manipulation (hex, base64, Java byte[]) |
| strings | 7 | String manipulation and encoding |
| intent | 6 | Android Intent parsing and construction |
| hook | 6 | Hook installation helpers |
| safe | 6 | Safe execution wrappers (structured errors) |
| time | 9 | Timing utilities (timestamps, stopwatch, debounce) |

### Critical Android Limitations Documented
1. `gating='child'` DOES NOT WORK on Android (zygote forking)
2. Process names differ from package IDs:
   - `mode='attach'`: Use process name (e.g., 'LINE')
   - `mode='spawn'`: Use package ID (e.g., 'jp.naver.line.android')

### Workflows Documented
1. Basic instrumentation loop (7 steps)
2. Iterate on draft module (6 steps)
3. Save working job as draft (5 steps)
4. Use permanent modules (3 steps)
5. Inspection (4 steps)

### Failure Modes Covered
1. Target app crash / process restart
2. Orchestrator agent crash
3. Job misbehavior (deadloop / event spam / no heartbeat)
4. Event flood / buffer overflow
5. Persistence failures (disk full / permission issues)

## Validation Checklist
- [x] All 6 documented concepts present
- [x] stdlib_reference contains all 9 namespaces
- [x] Storage paths are valid Windows absolute paths
- [x] Module contract documented with examples
- [x] Common mistakes documented (8 anti-patterns)

## Analysis
The toolkit contract is comprehensive. Key operational insight: each job runs in its own Frida script with full isolation - cancelling a job automatically cleans up all hooks via Frida script unload. No manual cleanup code needed in modules.

## Issues Encountered
None.
